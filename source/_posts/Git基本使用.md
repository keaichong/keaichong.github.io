---
title: Git基本使用
date: 2019-02-02 20:23:40
tags: "Git"
---

### Git 的 3 个区域

1. **工作目录**(working directory)
   简单理解就是需要进行版本的某个文件夹（假设为 test），这个文件夹有一些特殊之处——多了.git 这个隐藏的文件夹。
2. **暂存区域**（Stage 或 Index）
   暂存区可以理解为一个虚拟工作区，这个虚拟工作区会跟踪工作区的文件变化（增删改等操作）。这个工作区的位于.git 文件夹下的 index 目录下。除非是绕过暂存区直接提交，否则 Git 想把修改提交上去，就必须将修改存入暂存区最后才能 commit。每次提交的是暂存区所对应的文件快照。
3. **本地仓库**(repository)
   存放已经提交的数据，push 的时候，就是把这个区的数据 push 到远程仓库了

{% asset_img 55B64D09-9E28-42AF-AFED-C9D61A350A98.png  %}

   <!-- more -->

### 文件的三种状态

1. **已修改**(modified)

2. **已暂存**(staged)

3. **已提交**(committed)​

### 暂存区作用

1. 修改了 4 个文件，在不放弃任何修改的情况下，其中一个文件不想提交，如何操作？（没 add : git add 已经 add: git reset --soft ）
2. 修改到一半的文件，突然间不需要或者放弃修改了，怎么恢复未修改前文件？ (git checkout)
3. 代码写一半，被打断去做其他功能开发，未完成代码保存？(git stash)
4. 代码写一半，发现忘记切换分支了？(git stash & git checkout)
5. 代码需要回滚了？（git reset）
6. 等等

### 工作过程

1. 在工作目录中修改某些文件。
2. 对修改后的文件进行快照，然后保存到暂存区域。
3. 提交更新，将保存在暂存区域的文件快照永久转储到 Git 目录中。

### 创建工作目录

> 可以在本地的任意目录下，创建项目文件夹 demo，此项目文件夹就是我们的工作目录。

### 创建本地仓库

> 打开 Git bash 窗口，进入工作目录，输入下面的命令，创建本地仓库。

```
$ git init
```

> 执行完该命令后，在工作目录下会生成一个隐藏的目录.git，.git 目录就是我们的本地仓库，记录所有版本。

### 把已修改添加到暂存区

\$ git add . 把工作目录中所有的修改，都提交到**暂存区**。
在第一次 add 都还没有进行的时候，我们的暂存区还没有被创建出来，git 的对象库中也是空的。当我们执行 git add 的时候，.git 目录下面多了个 index 文件，这个 index 文件就是我们所说的暂存区，

> 暂存区在哪里？
> 当第一次执行 git add 的时候会在.git 文件夹中生成一个 index 文件，这就是暂存区

### 检查当前文件状态

\$ git status
git status 可以查看当前工作区中是否有可以暂存的文件、是否有可以提交的内容。

### 提交到版本库

\$ git commit -m '提交注释'
**注意**：git commit 的-m 参数是本次提交说明，必须填写，可以方便查看历史提交中的修改记录。

> 注意: git init 只需要写一次

### git-远程仓库

> 代码托管平台(github/码云)

1. 注册
2. 登录
3. 新建远程仓库 (右上角+->new->命名->create)

```bash
// 关联远程仓库
git remote add origin 仓库地址
// 推送代码
git push -u origin master
```

```bash'
// 开发功能1 -> 完成
git add .
git commit -m "注释1"
// 开发功能2 -> 完成
git add .
git commit -m "注释2"
// 推送代码
git push
```

#### 命令列表

| 序号 | 命令                                               | 功能               |
| ---- | -------------------------------------------------- | ------------------ |
| 01   | **git config --global user.name "xxx"**            | 设置用户名         |
| 02   | **git config --global user.email xxx@example.com** | 设置邮箱           |
| 03   | **git init**                                       | 初始化本地仓库     |
| 04   | **git add .**                                      | 把修改保存到暂存区 |
| 05   | **git status**                                     | 检查当前文件状态   |
| 06   | **git commit -m "msg"**                            | 提交到本地仓库     |
